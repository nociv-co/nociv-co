<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>NOCIV.CO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:black;
  color:#ccc;
  font-family:Arial, Helvetica, sans-serif;
  text-align:center;
}

.manifesto{
  font-size:1.2rem;
  line-height:2.2;
  margin-bottom:60px;
  max-width:700px;
  margin-left:auto;
  margin-right:auto;
}

.section{ margin-top:80px; }

button{
  background:#111;
  color:#aaa;
  border:1px solid #333;
  padding:6px 12px;
  cursor:pointer;
}

button:hover{ background:#333; }

#toolContainer, #colorContainer{
  background:#1a1a1a;
  padding:15px;
  margin-top:15px;
}

#toolRow{
  display:flex;
  justify-content:center;
  gap:10px;
}

#states button{
  margin:4px;
}

canvas{
  width:100%;
  background:white;
  display:block;
  touch-action:none;
}

.stateTag{
  border:1px solid #444;
  padding:4px 8px;
  font-size:12px;
}

.dateTag{
  font-size:12px;
  opacity:.6;
}
</style>
</head>

<body>

<!-- LOGO -->
<div style="max-width:900px; margin:60px auto 40px auto;">
  <img src="headernociv.svg" style="width:100%; max-width:600px;">
</div>

<p class="manifesto">
Representing Black America.<br><br>
Showcasing present connection.<br><br>
No ads. No algorithm. Just human.
</p>

<div class="section">
<h2>Next Pop-Up</h2>
<p>Phoenix, AZ<br>Coming Soon</p>
</div>

<hr style="margin:80px 0; border-color:#222;">

<div style="max-width:900px; margin:60px auto 40px auto;">
<img src="black-america.svg" style="width:100%;">
</div>

<section style="max-width:900px; margin:auto;">

<h2 style="letter-spacing:4px;">THE STALL WALL</h2>
<p style="opacity:.7; margin-bottom:40px;">
this is how word of mouth works, it goes peer to peer and reaches different states
</p>

<div id="states"></div>

<div id="editor" style="display:none; margin-top:40px;">
<h2 id="stateTitle"></h2>

<!-- WRITE -->
<div style="margin-bottom:40px;">
<h3>Write Something</h3>
<input id="textInput" placeholder="Type here..."
style="width:100%; padding:10px; background:#111; border:1px solid #333; color:#ccc;">
<button id="addTextBtn" style="margin-top:10px;">Add To Canvas</button>
</div>

<!-- DRAW -->
<div>
<h3>Or Draw Something</h3>

<div id="toolContainer">
<div id="toolRow"></div>
<div style="display:flex; justify-content:space-between; margin-top:10px;">
<button id="undoBtn">Undo</button>
<button id="redoBtn">Redo</button>
</div>
</div>

<canvas id="canvas"></canvas>

<div id="colorContainer">
<div id="colorBar" style="display:flex; justify-content:center; gap:10px;"></div>
</div>
</div>

<button id="sendBtn" style="margin-top:30px;">Send Mark</button>

</div>

</section>

<script>
const states=[ "Alabama","Alaska","Arizona","Arkansas","California","Colorado",
"Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois",
"Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland",
"Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana",
"Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York",
"North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania",
"Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah",
"Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];

const statesDiv=document.getElementById("states");
const editor=document.getElementById("editor");
const stateTitle=document.getElementById("stateTitle");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const toolRow=document.getElementById("toolRow");
const colorBar=document.getElementById("colorBar");
const undoBtn=document.getElementById("undoBtn");
const redoBtn=document.getElementById("redoBtn");

let currentState="";
let tool="pencil";
let color="#000";
let drawing=false;
let history=[];
let redoStack=[];

/* CANVAS SETUP */
function resizeCanvas(){
  canvas.width=canvas.offsetWidth;
  canvas.height=350;
  ctx.fillStyle="white";
  ctx.fillRect(0,0,canvas.width,canvas.height);
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

/* STATES */
states.forEach(s=>{
 let b=document.createElement("button");
 b.innerText=s;
 b.onclick=()=>{
   document.querySelectorAll("#states button").forEach(btn=>btn.style.background="#111");
   b.style.background="#444";
   currentState=s;
   stateTitle.innerText=s;
   editor.style.display="block";
 };
 statesDiv.appendChild(b);
});

/* TOOLS */
["pencil","eraser","fill"].forEach(t=>{
 let b=document.createElement("button");
 b.innerText=t;
 b.onclick=()=>{
   tool=t;
   document.querySelectorAll("#toolRow button").forEach(x=>x.style.outline="none");
   b.style.outline="2px solid white";

   if(tool==="fill"){
     saveState();
     ctx.fillStyle=color;
     ctx.fillRect(0,0,canvas.width,canvas.height);
   }
 };
 toolRow.appendChild(b);
});

/* COLORS */
["#0b3d2e","#8b0000","#d4a017","#000","#001f3f","#666","#ccc","#fff"].forEach(c=>{
 let sw=document.createElement("div");
 sw.style.width="28px";
 sw.style.height="28px";
 sw.style.background=c;
 sw.style.cursor="pointer";
 sw.onclick=()=>{
   color=c;
   document.querySelectorAll("#colorBar div").forEach(d=>d.style.outline="none");
   sw.style.outline="2px solid white";
 };
 colorBar.appendChild(sw);
});

/* WRITE BUTTON */
document.getElementById("addTextBtn").onclick=function(){
 const text=document.getElementById("textInput").value;
 if(!text) return;
 saveState();
 ctx.fillStyle=color;
 ctx.font="24px monospace";
 ctx.textAlign="center";
 ctx.fillText(text, canvas.width/2, canvas.height/2);
 document.getElementById("textInput").value="";
};

/* DRAWING (SMOOTH) */
function getPos(e){
 const rect=canvas.getBoundingClientRect();
 if(e.touches){
   return {
     x:e.touches[0].clientX-rect.left,
     y:e.touches[0].clientY-rect.top
   };
 }
 return {
   x:e.clientX-rect.left,
   y:e.clientY-rect.top
 };
}

canvas.addEventListener("mousedown",e=>{
 drawing=true;
 saveState();
 const pos=getPos(e);
 ctx.beginPath();
 ctx.moveTo(pos.x,pos.y);
});

canvas.addEventListener("mousemove",e=>{
 if(!drawing) return;
 const pos=getPos(e);
 if(tool==="pencil"){
   ctx.lineWidth=2;
   ctx.lineCap="round";
   ctx.strokeStyle=color;
   ctx.lineTo(pos.x,pos.y);
   ctx.stroke();
 }
 if(tool==="eraser"){
   ctx.clearRect(pos.x-8,pos.y-8,16,16);
 }
});

canvas.addEventListener("mouseup",()=>drawing=false);

canvas.addEventListener("touchstart",e=>{
 drawing=true;
 saveState();
 const pos=getPos(e);
 ctx.beginPath();
 ctx.moveTo(pos.x,pos.y);
});

canvas.addEventListener("touchmove",e=>{
 if(!drawing) return;
 const pos=getPos(e);
 if(tool==="pencil"){
   ctx.lineWidth=2;
   ctx.lineCap="round";
   ctx.strokeStyle=color;
   ctx.lineTo(pos.x,pos.y);
   ctx.stroke();
 }
 if(tool==="eraser"){
   ctx.clearRect(pos.x-8,pos.y-8,16,16);
 }
});

canvas.addEventListener("touchend",()=>drawing=false);

/* UNDO REDO */
function saveState(){
 history.push(canvas.toDataURL());
 redoStack=[];
}

undoBtn.onclick=()=>{
 if(history.length){
   redoStack.push(canvas.toDataURL());
   let img=new Image();
   img.src=history.pop();
   img.onload=()=>ctx.drawImage(img,0,0);
 }
};

redoBtn.onclick=()=>{
 if(redoStack.length){
   history.push(canvas.toDataURL());
   let img=new Image();
   img.src=redoStack.pop();
   img.onload=()=>ctx.drawImage(img,0,0);
 }
};
</script>

</body>
</html>
